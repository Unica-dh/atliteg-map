# Logs
logs

# Git backups (security cleanup backups)
.git.backup/

# Vscode
.vscode/

# Playwright reports
.playwright-mcp/










































































































































































echo "================================================"echo ""echo "   docs/GITHUB_ACTIONS_SETUP.md"echo "3. Consulta la documentazione completa:"echo ""echo "   - REMOTE_PROJECT_PATH: $REMOTE_PROJECT_PATH"echo "   - REMOTE_USER: $REMOTE_USER"echo "   - REMOTE_HOST: $REMOTE_HOST"echo "   - SSH_PRIVATE_KEY: [contenuto della chiave privata]"echo "2. Configura i GitHub Secrets:"echo ""echo "   cat $SSH_KEY_PATH"echo "1. Copia la chiave SSH privata:"echo "üìù Prossimi passi:"echo ""echo -e "${GREEN}‚úÖ Tutti i test principali superati!${NC}"echo ""echo "SSH Key: $SSH_KEY_PATH"echo "Path: $REMOTE_PROJECT_PATH"echo "User: $REMOTE_USER"echo "Host: $REMOTE_HOST"echo "================================================"echo "üìä RIEPILOGO TEST"echo "================================================"# Riepilogoecho ""fi    echo "   sudo usermod -aG docker $REMOTE_USER"    echo "   Potrebbe essere necessario aggiungere l'utente al gruppo docker:"    echo -e "${YELLOW}‚ö†Ô∏è  Problemi con i permessi Docker${NC}"else    done        echo "   - $line"    echo "$DOCKER_PS" | tail -n +2 | while read line; do    echo "   Container in esecuzione:"    echo -e "${GREEN}‚úÖ Permessi Docker OK${NC}"if [ $? -eq 0 ]; thenDOCKER_PS=$(ssh -i "$SSH_KEY_PATH" "$REMOTE_USER@$REMOTE_HOST" "docker ps" 2>&1)echo "üöÄ Test 9: Test permessi Docker..."# Test 9: Test esecuzione comandi Dockerecho ""fi    exit 1    echo -e "${RED}‚ùå File docker-compose.yml non trovato${NC}"else    echo -e "${GREEN}‚úÖ File docker-compose.yml trovato${NC}"if ssh -i "$SSH_KEY_PATH" "$REMOTE_USER@$REMOTE_HOST" "[ -f '$REMOTE_PROJECT_PATH/docker-compose.yml' ]" 2>/dev/null; thenecho "üìã Test 8: Verifica docker-compose.yml..."# Test 8: Verifica docker-compose.ymlecho ""fi    exit 1    echo -e "${RED}‚ùå Directory non √® un repository Git${NC}"else    echo "   Ultimo commit: $LAST_COMMIT"    LAST_COMMIT=$(ssh -i "$SSH_KEY_PATH" "$REMOTE_USER@$REMOTE_HOST" "cd '$REMOTE_PROJECT_PATH' && git log -1 --oneline" 2>/dev/null)    echo "   Branch corrente: $CURRENT_BRANCH"    CURRENT_BRANCH=$(ssh -i "$SSH_KEY_PATH" "$REMOTE_USER@$REMOTE_HOST" "cd '$REMOTE_PROJECT_PATH' && git branch --show-current" 2>/dev/null)    echo -e "${GREEN}‚úÖ Repository Git valido${NC}"if [ "$IS_GIT_REPO" = "true" ]; thenIS_GIT_REPO=$(ssh -i "$SSH_KEY_PATH" "$REMOTE_USER@$REMOTE_HOST" "cd '$REMOTE_PROJECT_PATH' && git rev-parse --is-inside-work-tree" 2>/dev/null)echo "üì¶ Test 7: Verifica repository Git..."# Test 7: Verifica repository Gitecho ""fi    echo -e "${YELLOW}‚ö†Ô∏è  Docker Compose non trovato (potrebbe essere 'docker compose' invece di 'docker-compose')${NC}"else    echo -e "${GREEN}‚úÖ Docker Compose installato: $COMPOSE_VERSION${NC}"if [ $? -eq 0 ]; thenCOMPOSE_VERSION=$(ssh -i "$SSH_KEY_PATH" "$REMOTE_USER@$REMOTE_HOST" "docker-compose --version" 2>/dev/null)echo "üîß Test 6: Verifica Docker Compose..."# Test 6: Verifica Docker Composeecho ""fi    exit 1    echo -e "${RED}‚ùå Docker non trovato${NC}"else    echo -e "${GREEN}‚úÖ Docker installato: $DOCKER_VERSION${NC}"if [ $? -eq 0 ]; thenDOCKER_VERSION=$(ssh -i "$SSH_KEY_PATH" "$REMOTE_USER@$REMOTE_HOST" "docker --version" 2>/dev/null)echo "üêã Test 5: Verifica Docker..."# Test 5: Verifica Dockerecho ""fi    exit 1    echo -e "${RED}‚ùå Git non trovato${NC}"else    echo -e "${GREEN}‚úÖ Git installato: $GIT_VERSION${NC}"if [ $? -eq 0 ]; thenGIT_VERSION=$(ssh -i "$SSH_KEY_PATH" "$REMOTE_USER@$REMOTE_HOST" "git --version" 2>/dev/null)echo "üîç Test 4: Verifica Git..."# Test 4: Verifica Gitecho ""fi    exit 1    echo -e "${RED}‚ùå Directory progetto non trovata: $REMOTE_PROJECT_PATH${NC}"else    echo -e "${GREEN}‚úÖ Directory progetto esistente: $REMOTE_PROJECT_PATH${NC}"if ssh -i "$SSH_KEY_PATH" "$REMOTE_USER@$REMOTE_HOST" "[ -d '$REMOTE_PROJECT_PATH' ]" 2>/dev/null; thenecho "üìÇ Test 3: Verifica directory progetto..."# Test 3: Verifica directory progettoecho ""fi    exit 1    echo "   - Chiave pubblica aggiunta al server (cat ${SSH_KEY_PATH}.pub)"    echo "   - User: $REMOTE_USER"    echo "   - Host: $REMOTE_HOST"    echo "   Verifica:"    echo -e "${RED}‚ùå Impossibile connettersi al server${NC}"else    echo -e "${GREEN}‚úÖ Connessione SSH funzionante${NC}"if ssh -i "$SSH_KEY_PATH" -o BatchMode=yes -o ConnectTimeout=5 "$REMOTE_USER@$REMOTE_HOST" "echo 'Connessione riuscita'" 2>/dev/null; thenecho "üì° Test 2: Test connessione SSH..."# Test 2: Test connessione baseecho ""fi    exit 1    echo "   ssh-keygen -t ed25519 -C 'github-actions-deploy' -f $SSH_KEY_PATH"    echo "   Genera una nuova chiave con:"    echo -e "${RED}‚ùå Chiave SSH non trovata: $SSH_KEY_PATH${NC}"else    echo -e "${GREEN}‚úÖ Chiave SSH trovata: $SSH_KEY_PATH${NC}"if [ -f "$SSH_KEY_PATH" ]; thenecho "üìù Test 1: Verifica chiave SSH..."# Test 1: Verifica esistenza chiave SSHecho ""echo "================================================"echo "üîç Test Connessione SSH per Deploy Automatico"echo "================================================"NC='\033[0m' # No ColorYELLOW='\033[1;33m'GREEN='\033[0;32m'RED='\033[0;31m'# Colori per outputSSH_KEY_PATH="$HOME/.ssh/github_deploy_key"REMOTE_PROJECT_PATH="/path/to/your/project"REMOTE_USER="your-username"REMOTE_HOST="your-server-ip-or-hostname"# CONFIGURAZIONE - Sostituisci questi valori con i tuoi# ========================================#   ./test-ssh-connection.local.sh#   chmod +x test-ssh-connection.local.sh#   nano test-ssh-connection.local.sh  # Modifica con i tuoi valori#   cp test-ssh-connection.example.sh test-ssh-connection.local.sh# Uso:## con i tuoi valori reali (il file .local.sh √® gi√† nel .gitignore)# Crea una copia chiamata 'test-ssh-connection.local.sh' e personalizzala# IMPORTANTE: Questo file √® solo un esempio.## PRIMA di configurare GitHub Actions.# Questo script serve per testare la connessione SSH al server remoto# ========================================# Script di Test Connessione SSH# ========================================*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*
npm_output.log

node_modules
.DS_Store
dist
dist-ssr
coverage
*.local

# Vite
.vite/

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

*.tsbuildinfo

.eslintcache

# Cypress
/cypress/videos/
/cypress/screenshots/

# Vitest
__screenshots__/

# Data
/data/*
# Eccezioni: file JSON/GeoJSON necessari per l'applicazione
!/data/*.json
!/data/*.geojson

# Data sync scripts
sync-data.sh
README_SYNC.md
data_backup_*/

# Deploy secrets (local testing only - use GitHub Secrets for production)
.env.deploy
deploy-config.local.sh
**/ssh_keys/
test-ssh-connection.local.sh

# Backend server
lemmario-dashboard/server/logs/*.log
lemmario-dashboard/server/uploads/*
!lemmario-dashboard/server/uploads/.gitkeep
lemmario-dashboard/server/uploads/backup/*
lemmario-dashboard/server/node_modules/

# Environment files
.env
.env.local
.env.production
!.env.example

# ========================================
# DATI SENSIBILI - NON TRACCIARE MAI!
# ========================================

# File lemmi (dati sensibili)
**/lemmi.json
**/Lemmi_*.csv
**/*lemmi*.csv
**/*lemmi*.json

# Directory dati sensibili
data/*.csv
data/*.json
!data/*.geojson
!data/limits_IT_regions.geojson

# Backend data (solo server runtime)
lemmario-dashboard/server/data/*.json
lemmario-dashboard/server/data/*.csv
!lemmario-dashboard/server/data/.gitkeep
!lemmario-dashboard/server/data/geojson.json

# Public data (non dovrebbero esistere)
lemmario-dashboard/public/data/*.csv
lemmario-dashboard/public/data/lemmi.json
lemmario-dashboard/public/data/Lemmi_*.csv

# Upload e backup (runtime only)
lemmario-dashboard/server/uploads/*
!lemmario-dashboard/server/uploads/.gitkeep

# Build output con dati
lemmario-dashboard/out/data/

# Test files
test_*.csv
*_test.csv
*_TEST.csv
playwright_test.csv

# Deleted files
deleted/

